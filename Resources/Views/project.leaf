<!DOCTYPE html>
<html>
<head>
    <title>Concord Business Services Time Billing System</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./css/jquery-ui-1.9.0.custom.min.css" />
    <link rel="stylesheet" href="./css/jquery.dataTables.css" />
    <link rel="stylesheet" href="./css/concordtb.css" />
    <script language="javascript" type="text/javascript"  src="https://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="https://code.jquery.com/ui/1.9.0/jquery-ui.min.js"></script>
    <script language="javascript" src="./js/jquery.validate.pack.js"></script>
    
    <script>
        $(document).ready(function() {
            $('.datepicker').datepicker();
            
            $('#btnSave').button();
        });
    </script>
    
    <style>
        .wrapper {display: grid; grid-template-columns: repeat(12, [col-start] 1fr); grid-gap: 20px; }
        .grid-1-1 {grid-column: col-start 1 / span 6; }
        .grid-1-2 {grid-column: col-start 7 / span 6; grid-row: 1}
        .grid-2-1 {grid-column: col-start 1 / span 6; grid-row: 2}
        .grid-2-2 {grid-column: col-start 7 / span 6; grid-row: 2}
        .grid-3-1 {grid-column: col-start 1 / span 6; grid-row: 3}
        .grid-3-2 {grid-column: col-start 7 / span 6; grid-row: 3}
        .grid-4-1 {grid-column: col-start 1 / span 4; grid-row: 4}
        .grid-4-2 {grid-column: col-start 5 / span 2; grid-row: 4}
        .grid-4-3 {grid-column: col-start 7 / span 3; grid-row: 4}
        .grid-4-4 {grid-column: col-start 9 / span 3: grid-row: 4}
        .grid-5-1 {grid-column: col-start 1 / span 4; grid-row: 6}
        .grid-5-2 {grid-column: col-start 5 / span 4; grid-row: 6}
        .grid-5-3 {grid-column: col-start 9 / span 3; grid-row: 6}
        .grid-6-1 {grid-column: col-start 1 / span 4; grid-row: 7}
        .grid-6-2 {grid-column: col-start 5 / span 4; grid-row: 7}
        .grid-6-3 {grid-column: col-start 9 / span 3; grid-row: 7}
        .grid-7-1 {grid-column: col-start 1 / span 6; grid-row: 9}
        .grid-7-2 {grid-column: col-start 7 / span 6; grid-row: 9}
        .underline-1 {grid-column: col-start 1 / span 12; grid-row: 5; border-bottom: 2px solid #ccc; }
        .underline-2 {grid-column: col-start 1 / span 12; grid-row: 8; border-bottom: 2px solid #ccc; }
        label {float: left; width: 10em; margin-right: 1em; text-align: right; }
    </style>
</head>
<body>
    
    <h2>
        #if(project){ 
            #(project.ProjectDescription)
        } else { 
            Add New Project 
        }
    </h2>
    
    <form method="post">    
        <div class="wrapper">
            <div class="grid-1-1"><label>Contract:</label>
                <select name="contractId">
                    #for(contract in lookup.contracts) {
                        <option value="#(contract.id)"  #if(contract.id == project.ContractID) { selected }>#(contract.name)</option>
                    }
                </select></div>
            <div class="grid-1-2"><label>Services For:</label>
                <select name="companyId">
                    #for(company in lookup.companies) {
                        <option value="#(company.id)" #if(company.id == project.ServicesForCompany) { selected }>#(company.name)</option>
                    }
                </select></div>
            <div class="grid-2-1"><label>Description:</label><input value="#(project.ProjectDescription)" name="description" /></div>
            <div class="grid-2-2"><label>#:</label><input value="#(project.ProjectNumber)" name="projectNumber" /></div>
            <div class="grid-3-1"><label>Status:</label>
                <select name="statusId">
                    #for(status in lookup.projectStatuses) {
                        <option value="#(status.StatusID)" #if(status.StatusID == project.StatusID) { selected }>#(status.StatusDescription)</option>
                    }
                </select></div>
            <div class="grid-3-2"><label>Status Notes:</label><textarea name="notes">#(project.StatusNotes)</textarea></div>
            <div class="grid-4-1"><label>Bug Tracking ID:</label><input value="#(project.MantisProjectID)" type="number" name="mantisId"></div>
            <div class="grid-4-2"><a href="#(buglink)" target="_blank">link</a></div>
            <div class="grid-4-3"><label>Hide Time Reporting:</label><input type="checkbox" #if(project.HideTimeReporting) { checked } name="hideTimeReporting"></input></div>
                
            <div class="underline-1">&nbsp;</div>

            <div class="grid-5-1"><label>Projected Time:</label><input value="#(project.ProjectedTime)" name="projectedTime"></div>
            <div class="grid-5-2"><label>Actual Time:</label><span class="read-only">#(totalTime)</span></div>
            <div class="grid-5-3">&nbsp;</div>
        
            <div class="grid-6-1"><label>Start Date:</label><input value="#date(project.StartDate, "MM/dd/yyyy")" name="startDate" class="datepicker"></div>
            <div class="grid-6-2"><label>Projected End Date:</label><input value="#date(project.ProjectedDateComplete, "MM/dd/yyyy")" name="endDate" class="datepicker""></div>
            <div class="grid-6-3">&nbsp;</div>
            <div class="underline-2">&nbsp;</div>
        </div>
        
        <input style="display:none" value="#(project.ProjectID)" name="projectId">
        <button type="submit" id="btnSave">Save</button>
    </form>

    <div class="journal-section">
        <h3>Journal</h3>
    
        #for(journal in journals) {
        
            <div class="journal-entry">
                <div class="journal-head">
                    <span class="date">#date(journal.ReportDate)</span> by 
                    <span class="person">#(journal.GeneratedBy)</span>
                </div>
                #if(journal.EventDescription) { <div class="eventDescription"> #(journal.EventDescription) </div> }
                #if(journal.Notes) { <div class="notes"> #(journal.Notes) </div> }
            </div>
        }
            
    
    </div>
        
        <div>Rates</div>
        
        

</body>
</html>
